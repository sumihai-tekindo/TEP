<odoo>
	<data>

		<record model="ir.ui.view" id="monitoring_progressc_tree_view">
			<field name="name">monitoring.progress.custom</field>
			<field name="model">monitoring.progress</field>
			<field name="arch" type="xml">
				<tree string="Monitoring Progress">
					<field name="contract_id"/>
					<field name="partner_id"/>
					<field name="partner_invoice_id"/>
					<field name="project_name_id"/>
					<field name="revenue_date"/>
				</tree>
			</field>
		</record>

		<record model="ir.ui.view" id="rekapitulasi_form_view">
			<field name="name">sale.order.rekapitulasi</field>
			<field name="model">sale.order</field>
			<field name="inherit_id" ref="sale.view_order_form"/>
			<field name="arch" type="xml"> 
				<xpath expr="//page[1]" position="attributes">
					<attribute name="string">Task</attribute>
				</xpath>
				<field name="order_line" position="attributes">
					<attribute name="string">Task</attribute>
				</field>
				<xpath expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='layout_category_id']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
				<xpath expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='qty_delivered']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
				<xpath expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='qty_invoiced']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
				<xpath expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='discount']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
				<xpath expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='customer_lead']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
				<xpath expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='name']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
				<xpath expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='price_subtotal']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
				<xpath expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='analytic_tag_ids']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
				<xpath expr="//field[@name='order_line']/form/group/group/field[@name='layout_category_id']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
				<!-- <xpath expr="//field[@name='order_line']/form/group/group/field[@name='product_packaging']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath> -->
				<xpath expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='price_total']" position="attributes">
					<attribute name="string">Total Harga</attribute>
				</xpath>
				<xpath expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='price_unit']" position="attributes">
					<attribute name="string">Harga Satuan</attribute>
				</xpath>
				<xpath expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='product_uom_qty']" position="attributes">
					<attribute name="string">Qty</attribute>
				</xpath>
				<xpath expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='product_uom']" position="attributes">
					<attribute name="string">Satuan</attribute>
				</xpath>
				<xpath expr="//field[@name='order_line']/tree//field[@name='product_id']" position="replace">
					<field name="product_id" invisible="1"
						context="{'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'pricelist':parent.pricelist_id, 'uom':False, 'company_id': parent.company_id}"
						groups="base.group_user"
						on_change="product_id_change_with_wh(parent.pricelist_id,product_id,product_uom_qty,False,product_uos_qty,False,name,parent.partner_id, False, True, parent.date_order, product_packaging, parent.fiscal_position, False, parent.warehouse_id, context)"/>
					</xpath>
					<field name="state" position="after">
						<field name="state" readonly="1" widget="statusbar"/>
					</field>
					<field name="partner_shipping_id" position="after">
						<field name="contract_id"/>
						<field name="project_code" attrs="{'invisible': ['|', ('state', '!=', 'done')]}"/>
						<field name="start_date"/>
						<field name="end_date"/>
					</field>
					<field name="payment_term_id" position="after">
						<!-- <div>
							<field name="percent_dp" />
							<label string=" %" />
						</div> -->
						<field name="percent_dp"/>
						<field name="nilai_dp"/>
						<field name="percent_retensi"/>
						<field name="other"/>
						<field name="currency_id"/>
						<field name="amandement"/>
						<field name="contract_no" attrs="{'invisible': [('amandement','=', False)]}"/>
					</field>
				</field>
			</record>

			<record model="ir.ui.view" id="sale_order_view_inherit">
				<field name="name">sale.order.view.inherit1</field>
				<field name="model">sale.order</field>
				<field name="inherit_id" ref="sale.view_order_form"/>
				<field name="arch" type="xml">
					<xpath expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='product_id']" position="after">
						<field name="no_task"/>
						<field name="uraian"/>
						<field name="keterangan"/>
					</xpath>
					<xpath expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='product_uom']" position="after">
						<field name="weight"/>
						<field name="start_date"/>
						<field name="end_date"/>
					</xpath>
					<xpath expr="//field[@name='order_line']/form//field[@name='tax_id']" position="before">
						<field name="no_task"/>
						<field name="uraian"/>
						<field name="keterangan"/>
						<field name="weight"/>
						<field name="start_date"/>
						<field name="end_date"/>
					</xpath>
				</field>
			</record>

			<record model="ir.ui.view" id="monitoring_progress_form_view">
				<field name="name">monitoring_progress.form</field>
				<field name="model">monitoring.progress</field>
				<field name="arch" type="xml">
					<form string="Work Description">
						<header>
							<button name="generate_progress" string="Generate Progress" type="object" class="btn-primary" attrs="{'invisible': ['|', ('state', '!=', 'new')]}"/>
							<button name="recalculate_progress" string="Recalculate Progress" type="object" class="btn-primary"/>
							<button name="recognize_revenue" string="Recognize Revenue" type="object" class="btn-primary"/>
							<button name="customer_approved" string="Customer Approved" type="object" class="btn-primary" attrs="{'invisible': ['|', ('state', '!=', 'approve')]}"/>
							<button name="generate_billing" string="Generate Billing" type="object" class="btn-primary" attrs="{'invisible': ['|', ('state', '!=', 'billing')]}"/>
							<field name="state" widget="statusbar" statusbar_visible="new,recognize,approve,billing"/>
						</header>
						<sheet>
							<group>
								<group>
									<field name="contract_id"/>
									<field name="partner_id"/>
									<field name="partner_invoice_id"/>
									<field name="project_name_id"/>
									<field name="ap_approved"/>
								</group>
								<group>
									<field name="revenue_date"/>
									<field name="currency_id"/>
									<field name="tp_aktual"/>
									<field name="ap_aktual"/>
									<field name="tp_approved"/>
								</group>
							</group>
							<notebook>
								<page string="Detail Lines">
									<field name="detail_line">
										<tree string="Detail Lines" editable="bottom">
											<field name="state" invisible="1"/>
											<field name="no_task" attrs="{'readonly': [('state', 'in', ('recognize', 'approve', 'billing'))]}"/>
											<field name="task_description" attrs="{'readonly': [('state', 'in', ('recognize', 'approve', 'billing'))]}"/>
											<field name="unit_price" attrs="{'readonly': [('state', 'in', ('recognize', 'approve', 'billing'))]}"/>
											<field name="progress_date" attrs="{'readonly': [('state', 'in', ('recognize', 'approve', 'billing'))]}"/>
											<field name="pp_aktual" attrs="{'readonly': [('state', 'in', ('recognize', 'approve', 'billing'))]}"/>
											<field name="pp_approved"/>
											<field name="total_revenue" attrs="{'readonly': [('state', 'in', ('recognize', 'approve', 'billing'))]}"/>
											<field name="total_invoice"/>
										</tree>
									</field>
									<group class="oe_subtotal_footer oe_right" colspan="2" name="sale_total">
										<div class="oe_subtotal_footer_separator oe_inline o_td_label">
											<label for="amount_total" />
											<button name="button_dummy"
												states="draft,sent" string="(update)" type="object" class="oe_edit_only oe_link"/>
										</div>
										<field name="amount_total" nolabel="1" class="oe_subtotal_footer_separator" widget='monetary' options="{'currency_field': 'currency_id'}"/>
									</group>
								</page>
								<page string="Other Information">
									<field name="description"/>
								</page>
							</notebook>
						</sheet>
					</form>
				</field>
			</record>

			<record model="ir.ui.view" id="form_invoice_form_view">
				<field name="name">account.invoice.form</field>
				<field name="model">account.invoice</field>
				<field name="inherit_id" ref="account.invoice_form"/>
				<field name="arch" type="xml">
					<header>
						
					</header>
					<xpath expr="//page[1]" position="attributes">
						<attribute name="string">Detail Lines</attribute>
					</xpath>
					<field name="payment_term_id" position="after">
						<field name="progress_id"/>
						<field name="no_contract"/>
						<field name="project_name_id"/>
					</field>
					<field name="team_id" position="after">
						<field name="tanggal_invoice"/>
						<field name="nilai_tender"/>
						<field name="user_id"/>
						<field name="proporsional_dp"/>
						<field name="uang_muka" attrs="{'invisible': [('proporsional_dp','=', False)]}"/>
						<field name="proporsional_retensi"/>
						<field name="retensi" attrs="{'invisible': [('proporsional_retensi','=', False)]}"/>
					</field>
					<xpath expr="/form/sheet/notebook/page/field[@name='invoice_line_ids']/tree/field[@name='discount']" position="attributes">
						<attribute name="invisible">1</attribute>
					</xpath>
					<xpath expr="/form/sheet/notebook/page/field[@name='invoice_line_ids']/tree/field[@name='account_analytic_id']" position="attributes">
						<attribute name="invisible">1</attribute>
					</xpath>
					<xpath expr="/form/sheet/notebook/page/field[@name='invoice_line_ids']/tree/field[@name='account_id']" position="attributes">
						<attribute name="invisible">1</attribute>
					</xpath>
					<xpath expr="/form/sheet/notebook/page/field[@name='invoice_line_ids']/tree/field[@name='analytic_tag_ids']" position="attributes">
						<attribute name="invisible">1</attribute>
					</xpath>
					<xpath expr="/form/sheet/notebook/page/field[@name='invoice_line_ids']/tree/field[@name='product_id']" position="attributes">
						<attribute name="invisible">1</attribute>
					</xpath>
					<xpath expr="/form/sheet/notebook/page/field[@name='invoice_line_ids']/tree/field[@name='layout_category_id']" position="attributes">
						<attribute name="invisible">1</attribute>
					</xpath>
					<xpath expr="/form/sheet/notebook/page/field[@name='invoice_line_ids']/tree/field[@name='quantity']" position="attributes">
						<attribute name="invisible">1</attribute>
					</xpath>
					<xpath expr="/form/sheet/notebook/page/field[@name='invoice_line_ids']/tree/field[@name='uom_id']" position="attributes">
						<attribute name="invisible">1</attribute>
					</xpath>
					<xpath expr="/form/sheet/notebook/page/field[@name='invoice_line_ids']/tree/field[@name='name']" position="attributes">
						<attribute name="invisible">1</attribute>
					</xpath>
					<xpath expr="/form/sheet/notebook/page/field[@name='invoice_line_ids']/tree/field[@name='name']" position="after">
						<field name="no_invoice"/>
						<field name="work_description"/>
						<field name="progress_date"/>
						<field name="progress_aktual"/>
						<field name="progress_approved"/>
					</xpath>
					<notebook>
						<page string="Kwitansi">
							<group>
								<group>
									<field name="no_kwitansi"/>
									<field name="tanggal_kwitansi"/>
								</group>
								<group>
								</group>
							</group>
						</page>
						<page string="Faktur">
							<group>
								<group>
									<field name="no_faktur"/>
									<field name="tanggal_faktur"/>
								</group>
								<group>
								</group>
							</group>
						</page>
					</notebook>
				</field>
			</record>

			<record id="sequence_invoice" model="ir.sequence">
				<field name="name">Account Invoice</field>
				<field name="code">account.sequence.inherit</field>
				<field name="prefix">INV/</field>
				<field name="padding">6</field>
				<field name="suffix">/%(month)s/%(year)s</field>
				<field name="company_id" eval="False"/>
			</record>

			<record id="sequence_so" model="ir.sequence">
				<field name="name">Sales Order</field>
				<field name="code">so.sequence.inherit</field>
				<field name="prefix">BOQ/</field>
				<field name="padding">6</field>
				<field name="suffix">/%(month)s/%(year)s</field>
				<field name="company_id" eval="False"/>
			</record>

			<record id="seq_monitoring" model="ir.sequence">
				<field name="name">Monitoring Contract Berjalan</field>
				<field name="code">contract.monitoring</field>
				<field name="prefix">PRT/</field>
				<field name="suffix">/%(month)s/%(year)s</field>
				<field name="padding">6</field>
				<field eval="1" name="number_increment"/>
			</record>

			<record model="ir.actions.act_window" id="monitoring_progress_list_action">
				<field name="name">Monitoring Progress</field>
				<field name="res_model">monitoring.progress</field>
				<field name="view_type">form</field>
				<field name="view_mode">tree,form</field>
				<field name="help" type="html">
					<p class="oe_view_nocontent_create">Buatlah Monitoring Progressnya ...</p>
				</field>
			</record>


			<menuitem id="contract_totalindo" name="Kontrak" parent="sales_team.menu_base_partner"/>

			<menuitem id="monitoring_progress_kontrak" name="Monitoring Progress" parent="contract_totalindo"
				action="monitoring_progress_list_action"/>

			</data>
		</odoo>