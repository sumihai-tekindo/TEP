<odoo>
	<data>

		<record model="ir.ui.view" id="monitoring_progressc_tree_view">
			<field name="name">monitoring.progress.custom</field>
			<field name="model">monitoring.progress</field>
			<field name="arch" type="xml">
				<tree string="Monitoring Progress">
					<field name="contract_id"/>
					<field name="partner_id"/>
					<field name="partner_invoice_id"/>
					<field name="project_name_id"/>
					<field name="revenue_date"/>
				</tree>
			</field>
		</record>

		<record model="ir.ui.view" id="rekapitulasi_form_view">
			<field name="name">sale.order.rekapitulasi</field>
			<field name="model">sale.order</field>
			<field name="inherit_id" ref="sale.view_order_form"/>
			<field name="arch" type="xml"> 
				<xpath expr="//page[1]" position="attributes">
					<attribute name="string">Task</attribute>
				</xpath>
				<field name="order_line" position="attributes">
					<attribute name="string">Task</attribute>
				</field>
				<xpath expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='layout_category_id']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
				<xpath expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='qty_delivered']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
				<xpath expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='qty_invoiced']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
				<xpath expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='discount']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
				<xpath expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='customer_lead']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
				<xpath expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='name']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
				<xpath expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='price_subtotal']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
				<xpath expr="//field[@name='order_line']/tree//field[@name='product_id']" position="replace">
                       <field name="product_id" invisible="1"
                       context="{'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'pricelist':parent.pricelist_id, 'uom':False, 'company_id': parent.company_id}"
                       groups="base.group_user"
                       on_change="product_id_change_with_wh(parent.pricelist_id,product_id,product_uom_qty,False,product_uos_qty,False,name,parent.partner_id, False, True, parent.date_order, product_packaging, parent.fiscal_position, False, parent.warehouse_id, context)"/>
                </xpath>
                <!-- <xpath expr="//field[@name='order_line']/form//field[@name='product_id']" position="replace">
                       <field name="product_id" invisible="1"
                       context="{'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'pricelist':parent.pricelist_id, 'uom':False, 'company_id': parent.company_id}"
                       groups="base.group_user"
                       on_change="product_id_change_with_wh(parent.pricelist_id,product_id,product_uom_qty,False,product_uos_qty,False,name,parent.partner_id, False, True, parent.date_order, product_packaging, parent.fiscal_position, False, parent.warehouse_id, context)"/>
                </xpath> -->
				<field name="state" position="after">
					<field name="state" readonly="1" widget="statusbar"/>
				</field>
				<field name="partner_shipping_id" position="after">
					<field name="contract_id" attrs="{'invisible': ['|', ('state', '!=', 'done')]}"/>
					<field name="project_code" attrs="{'invisible': ['|', ('state', '!=', 'done')]}"/>
					<field name="start_date"/>
					<field name="end_date"/>
				</field>
				<field name="payment_term_id" position="after">
					<field name="percent_dp"/>
					<field name="nilai_dp"/>
					<field name="percent_retensi"/>
					<field name="other"/>
					<field name="currency_id"/>
					<field name="amandement"/>
					<field name="contract_no" attrs="{'required': [('amandement','!=', False)]}"/>
				</field>
			</field>
		</record>

		<record model="ir.ui.view" id="sale_order_view_inherit">
			<field name="name">sale.order.view.inherit1</field>
			<field name="model">sale.order</field>
			<field name="inherit_id" ref="sale.view_order_form"/>
			<field name="arch" type="xml">
				<xpath expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='product_id']" position="after">
					<field name="no_task"/>
					<field name="uraian"/>
					<field name="keterangan"/>
					<field name="weight"/>
					<field name="start_date"/>
					<field name="end_date"/>
					<field name="product_id" />
						<!-- attrs="{'default': [('is_freight_charge', '!=', False)]}"/> -->
				</xpath>
				<xpath expr="//field[@name='order_line']/form//field[@name='tax_id']" position="before">
					<field name="no_task"/>
					<field name="uraian"/>
					<field name="keterangan"/>
					<field name="weight"/>
					<field name="start_date"/>
					<field name="end_date"/>
				</xpath>
			</field>
		</record>

		<record model="ir.ui.view" id="monitoring_progress_form_view">
			<field name="name">monitoring_progress.form</field>
			<field name="model">monitoring.progress</field>
			<field name="arch" type="xml">
				<form string="Work Description">
					<header>
						<button string="Generate Progress" type="object" class="btn-primary"/>
						<button string="Recalculate Progress" type="object" class="btn-primary"/>
						<button string="Recognize Revenue" type="object" class="btn-primary" attrs="{'invisible': ['|', ('state', '!=', 'open')]}"/>
						<button string="Generate Billing" type="object" class="btn-primary" attrs="{'invisible': ['|', ('state', '!=', 'open')]}"/>
						<field name="state" widget="statusbar" statusbar_visible="new,recognize,billing"/>
					</header>
					<sheet>
						<group>
							<group>
								<field name="contract_id"/>
								<field name="partner_id"/>
								<field name="partner_invoice_id"/>
								<field name="project_name_id"/>
								<field name="ap_approved"/>
							</group>
							<group>
								<field name="revenue_date"/>
								<field name="currency_id"/>
								<field name="tp_aktual"/>
								<field name="ap_aktual"/>
								<field name="tp_approved"/>
							</group>
						</group>
						<notebook>
							<page string="Detail Lines">
								<field name="detail_line">
									<tree string="Detail Lines" editable="bottom">
										<field name="no_task"/>
										<field name="work_description"/>
										<field name="unit_price"/>
										<field name="progress_date"/>
										<field name="pp_aktual"/>
										<field name="pp_approved"/>
										<field name="total_revenue"/>
										<field name="total_invoice"/>
									</tree>
								</field>
							</page>
							<page string="Other Information">
								<field name="description"/>
							</page>
						</notebook>
						<h2>Description</h2>
						<field string="Description" name="description" class="oe_inline" placeholder="Masukkan berita acara mengenai progress dari suatu kontrak."/>
						<div class="oe_clear"/>
					</sheet>
				</form>
			</field>
		</record>

		<record model="ir.ui.view" id="form_invoice_form_view">
			<field name="name">account.invoice.form</field>
			<field name="model">account.invoice</field>
			<field name="inherit_id" ref="account.invoice_form"/>
			<field name="arch" type="xml">
				<header>
					<button string="Kwitansi" type="object" class="btn-primary"/>
					<!-- <button name="cetak_faktur" string="Faktur" type="object" class="btn-primary"/> -->
				</header>
				<xpath expr="//page[1]" position="attributes">
					<attribute name="string">Detail Lines</attribute>
				</xpath>
				<field name="payment_term_id" position="after">
					<field name="progress_id"/>
					<field name="no_contract"/>
					<field name="project_name"/>
				</field>
				<field name="team_id" position="after">
					<field name="tanggal_invoice"/>
					<field name="nilai_tender"/>
					<field name="user_id"/>
					<field name="uang_muka"/>
					<field name="proporsional_dp"/>
					<field name="retensi"/>
					<field name="proporsional_retensi"/>
				</field>
				<notebook>
					<page string="Monitoring Detail">
						<field name="detail_line">
							<tree string="Form Invoice" editable="bottom">
								<field name="no_invoice"/>
								<field name="work_description"/>
								<field name="progress_date"/>
								<field name="progress_aktual"/>
								<field name="progress_approved"/>
								<field name="tax"/>
								<field name="nilai_invoice"/>
							</tree>
						</field>
					</page>
					<page string="Kwitansi">
						<group>
							<group>
								<field name="no_kwitansi"/>
								<field name="tanggal_kwitansi"/>
							</group>
							<group>
							</group>
						</group>
					</page>
					<page string="Faktur">
						<group>
							<group>
								<field name="no_faktur"/>
								<field name="tanggal_faktur"/>
							</group>
							<group>
							</group>
						</group>
					</page>
				</notebook>
				<!-- <xpath expr="//field[@name='product_id']" position="attributes">
					<attribute name="domain">
						['|', ('is_freight_charge', '=', True)]
					</attribute>
				</xpath> -->
			</field>
		</record>

		<record id="seq_umroh" model="ir.sequence">
			<field name="name">Monitoring Contract Berjalan</field>
			<field name="code">contract.monitoring</field>
			<field name="prefix">PRT/</field>
			<field name="suffix">/TEP/%(month)s/%(year)s</field>
			<field name="padding">6</field>
			<field eval="1" name="number_increment"/>
		</record>

		<record model="ir.actions.act_window" id="monitoring_progress_list_action">
			<field name="name">Monitoring Progress</field>
			<field name="res_model">monitoring.progress</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="help" type="html">
				<p class="oe_view_nocontent_create">Buatlah Monitoring Progressnya ...</p>
			</field>
		</record>

		<menuitem id="contract_totalindo" name="Kontrak" parent="sales_team.menu_base_partner"/>

		<menuitem id="monitoring_progress_kontrak" name="Monitoring Progress" parent="contract_totalindo"
			action="monitoring_progress_list_action"/>

		</data>
	</odoo>